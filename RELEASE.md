# Release Guide

This document describes how to release new versions of the gem.

## Version Bumping

The project uses [standard-version](https://github.com/conventional-changelog/standard-version) to automate versioning and changelog generation based on [conventional commits](https://www.conventionalcommits.org/).

### Commit Message Format

```
<type>(<scope>): <description>

[optional body]

[optional footer(s)]
```

**Types:**
- `feat:` → minor version bump
- `fix:` → patch version bump
- `feat!:` or `BREAKING CHANGE:` → major version bump
- `chore:`, `docs:`, `refactor:`, etc. → no version bump

### Release Process

```bash
# Make your changes and commit them
git commit -m "fix: resolve editor initialization issue"
git commit -m "feat: add dark theme support"

# Run standard-version to bump version, generate changelog, and create tag
npx standard-version
```

This will:
1. Analyze commits since last tag
2. Determine bump type (major/minor/patch)
3. Update `package.json` version
4. Generate CHANGELOG entries from commits
5. Sync version to Ruby (`lib/activeadmin_mitosis_editor/version.rb`)
6. Create a git tag (e.g., v0.1.8)

### Publish to RubyGems

After running standard-version:

```bash
# Push commits and tags
git push --follow-tags origin master

# Build and publish the gem
gem build *.gemspec
gem push activeadmin_mitosis_editor-X.X.X.gem
```

## Manual Release

If you need manual control over versioning:

```bash
# Specify the version type explicitly
npx standard-version --release-as minor
npx standard-version --release-as 2.0.0
```

## GitHub Actions Release

The repository has an automated workflow that runs on push to `main`.

### Automatic (on push)

On every push to `main`, the workflow:
1. Detects version bump type from commits
2. Updates version in `lib/activeadmin_mitosis_editor/version.rb`
3. Updates CHANGELOG.md
4. Builds the gem
5. Publishes to RubyGems
6. Creates a git tag

### Manual (workflow dispatch)

You can manually trigger a release from the GitHub Actions UI:

1. Go to Actions → Release
2. Click "Run workflow"
3. Select version type: `patch`, `minor`, or `major`
4. Click "Run workflow"

## Requirements

- Node.js 18+ (for standard-version)
- Ruby 3.3+
- RubyGems account with API key
- `RUBYGEMS_API_KEY` secret in GitHub repository settings

## CHANGELOG

The CHANGELOG.md is automatically generated by standard-version based on conventional commits. See [Keep a Changelog](https://keepachangelog.com/) for format details.
